server {
	listen 80;
	server_name <app_url />;
	return 301 https://<app_url />$request_uri;
}

server {
	listen 443 ssl;
	listen [::]:443 ssl;
	server_name <app_url />;
	root <wwwroot />/html/<repo_name />/public/;

	# log files - disabled as log rotation needed
	# access_log   /var/www/html/<repo_name />/storage/logs/nginxaccess.log;
	# error_log    /var/www/html/<repo_name />/storage/logs/nginxerror.log error;


	# ssl_certificates
	<ssl_certs />

	fastcgi_buffers 16 16k;
	fastcgi_buffer_size 32k;
	index index.php index.html index.htm;

	location / {
		try_files $uri $uri/ /index.php?$query_string;
	}

	location ~ \.php$ {
		try_files $uri /index.php =404;
		fastcgi_buffering on;# important - set as off for WSL dev environment
		fastcgi_split_path_info ^(.+\.php)(/.+)$;
		fastcgi_pass unix:<FPM_SOCKFILE />;
		fastcgi_index index.php;
		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
		fastcgi_read_timeout 60;
		include fastcgi_params;
	}
}